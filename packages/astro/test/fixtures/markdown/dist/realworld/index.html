<!DOCTYPE html><p><strong>I’m not a huge fan of Advanced Custom Fields, but there was a requirement to use it in a recent project that had Bootstrap as a basis for the UI. The challenge for me was to get Bootstrap <a href="http://getbootstrap.com/components/#nav-tabs" title="Bootstrap nav-tabs component">nav-tabs</a> to play nice with an <a href="http://www.advancedcustomfields.com/resources/querying-the-database-for-repeater-sub-field-values/" title="Repeater sub-field on Advanced Custom Fields website">ACF repeater field</a>.</strong></p>
<p>I started with the basic HTML markup for Bootstrap’s Nav Tabs:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">ul</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"nav nav-tabs"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#B392F0"> role</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"presentation"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"active"</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabone"</span><span style="color:#E1E4E8">>TabOne&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#B392F0"> role</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"presentation"</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabtwo"</span><span style="color:#E1E4E8">>TabTwo&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#B392F0"> role</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"presentation"</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabthree"</span><span style="color:#E1E4E8">>TabThree&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">ul</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tab-content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tab-pane active"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabone"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">     Some content in tab one</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tab-pane active"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabtwo"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">     Some content in tab two</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tab-pane active"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tabthree"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">     Some content in tab three</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<p>In the Field Groups settings, I created a Repeater (this is a paid-for add on to the standard Advanced Custom Fields) called “tab Panes”, with 2 sub-fields, “Tab Title” and “Tab Contents”.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span></span>
<span class="line"><span style="color:#F97583">&#x3C;!--</span><span style="color:#79B8FF"> Check</span><span style="color:#F97583"> for</span><span style="color:#F97583"> parent</span><span style="color:#79B8FF"> repeater</span><span style="color:#79B8FF"> row</span><span style="color:#F97583"> --></span></span>
<span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8">( </span><span style="color:#B392F0">have_rows</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_panes'</span><span style="color:#E1E4E8">) )</span><span style="color:#F97583">:</span><span style="color:#F97583"> ?></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;</span><span style="color:#79B8FF">ul</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"nav nav-tabs"</span><span style="color:#79B8FF"> role</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"tablist"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#6A737D"> // Step 1: Loop through rows, first displaying tab titles in a list</span></span>
<span class="line"><span style="color:#F97583">   while</span><span style="color:#E1E4E8">( </span><span style="color:#B392F0">have_rows</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_panes'</span><span style="color:#E1E4E8">) )</span><span style="color:#F97583">:</span><span style="color:#B392F0"> the_row</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;</span><span style="color:#79B8FF">li</span><span style="color:#79B8FF"> role</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"presentation"</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"active"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;</span><span style="color:#79B8FF">a</span></span>
<span class="line"><span style="color:#79B8FF">        href</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"#tabone"</span></span>
<span class="line"><span style="color:#79B8FF">        role</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"tab"</span></span>
<span class="line"><span style="color:#79B8FF">        data</span><span style="color:#F97583">-</span><span style="color:#79B8FF">toggle</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"tab"</span></span>
<span class="line"><span style="color:#F97583">        ></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#B392F0"> the_sub_field</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_title'</span><span style="color:#E1E4E8">); </span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;/</span><span style="color:#79B8FF">a</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;/</span><span style="color:#79B8FF">li</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> endwhile</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// end of (have_rows('tab_panes') ):</span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;/</span><span style="color:#79B8FF">ul</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> endif</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// end of (have_rows('tab_panes') ): </span><span style="color:#F97583">?></span></span>
<span class="line"></span></code></pre>
<p>The PHP above displays the tabs. The code below, very similarly, displays the tab panes:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8">( </span><span style="color:#B392F0">have_rows</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_panes'</span><span style="color:#E1E4E8">) )</span><span style="color:#F97583">:</span><span style="color:#F97583"> ?></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;</span><span style="color:#79B8FF">div</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"tab-content"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#6A737D">// number rows </span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#6A737D"> // Step 2: Loop through rows, now displaying tab contents</span></span>
<span class="line"><span style="color:#F97583">   while</span><span style="color:#E1E4E8">( </span><span style="color:#B392F0">have_rows</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_panes'</span><span style="color:#E1E4E8">) )</span><span style="color:#F97583">:</span><span style="color:#B392F0"> the_row</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">  // Display each item as a list </span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;</span><span style="color:#79B8FF">div</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"tab-pane active"</span><span style="color:#79B8FF"> id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"tabone"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">          &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#B392F0"> the_sub_field</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'tab_contents'</span><span style="color:#E1E4E8">); </span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;/</span><span style="color:#79B8FF">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> endwhile</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// (have_rows('tab_panes') ):</span><span style="color:#F97583">?></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;/</span><span style="color:#79B8FF">div</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#F97583"> endif</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// (have_rows('tab_panes') ): </span><span style="color:#F97583">?></span></span>
<span class="line"></span></code></pre>
<p>By looping through the same repeater, we can get all the tabs out of the database, no problem. But we still have two problems: 1) linking the tab to the pane 2) Assigning the class of “active” so the Javascript is able to add and remove the CSS to reveal / hide the appropriate pane.</p>
<h3 id="1-linking-to-the-pane">1) Linking to the Pane</h3>
<p>There are a number of ways to do this. I could ask the user to input a number to uniquely identify the tab pane. But that would add extra work to the users flow, and they might easily find themselves out of their depth. I want to make this as easy as possible for the user.</p>
<p>On the other hand, WordPress has a very useful function called Sanitize HTML, which we input the value of the title, take out spaces and capitals, and use this as the link:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF">a</span><span style="color:#79B8FF"> href</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"#&#x3C;?php echo sanitize_html_class( the_sub_field( 'tab_title' ) ); ?>"</span></span>
<span class="line"></span></code></pre>
<h3 id="2-assigning-the-active-class">2) Assigning the ‘Active’ Class</h3>
<p>So now we need to get a class of ‘active’ <em>only on</em> the first tab. The Bootstrap Javascript will do the rest for us. How do we do that?</p>
<p>I added this code just inside the <code>while</code> loop, inside the <code>ul</code> tag:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#E1E4E8"> $row </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// number rows </span><span style="color:#F97583">?></span></span>
<span class="line"></span></code></pre>
<p>This php is a counter. So we can identify the first instance and assign an <code>if</code> statement to it.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF">a</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"&#x3C;?php if(</span><span style="color:#E1E4E8">$row</span><span style="color:#9ECBFF"> == 1) {echo 'active';}?>"</span><span style="color:#F97583">></span></span>
<span class="line"></span></code></pre>
<p>The final thing to do, is to keep the counter running, but adding this just before the <code>endwhile</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;?</span><span style="color:#79B8FF">php</span><span style="color:#E1E4E8"> $row</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">endwhile</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// (have_rows('tab_panes') ):</span><span style="color:#F97583">?></span></span>
<span class="line"></span></code></pre>
<p>Once you’ve added these to the tab panes in a similar way, you’ll be up and running with Bootstrap Tabs.</p>
<p>Below is a GitHub Gist, with the complete code for reference. <a href="https://gist.github.com/endymion1818/478d86025f41c8060888" title="GitHub GIST for Advanced Custom Fields bootstrap tabs">Link to this (if you can’t see the iFrame)</a>.</p>
<script src="https://gist.github.com/endymion1818/478d86025f41c8060888.js"></script>